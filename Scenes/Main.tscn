[gd_scene load_steps=15 format=3 uid="uid://cv0kmglile0l7"]

[ext_resource type="PackedScene" uid="uid://x4khlkw6qu05" path="res://Scenes/Player.tscn" id="1"]
[ext_resource type="PackedScene" path="res://UI/MessageHud.tscn" id="2"]
[ext_resource type="TileSet" uid="uid://bbe10d7lm3cy3" path="res://wall tile set.tres" id="3_1p5hy"]
[ext_resource type="PackedScene" path="res://VFX/ReadabilityOverlay.tscn" id="4"]
[ext_resource type="PackedScene" path="res://UI/ExitSignLayer.tscn" id="5"]
[ext_resource type="PackedScene" path="res://VFX/SoundRippleManager.tscn" id="6"]
[ext_resource type="Script" uid="uid://b2x1ys54sgisv" path="res://Scripts/Main.gd" id="8"]
[ext_resource type="Script" uid="uid://dspas587cy1x1" path="res://Scripts/EscalationManager.gd" id="9"]
[ext_resource type="PackedScene" uid="uid://cyruxhht66d6q" path="res://Scenes/Hunter.tscn" id="10"]
[ext_resource type="PackedScene" path="res://UI/HuntedBanner.tscn" id="11"]
[ext_resource type="PackedScene" path="res://UI/InteractPrompt.tscn" id="12"]
[ext_resource type="TileSet" uid="uid://dafxu3tflyhgo" path="res://new_tile_set.tres" id="13_frkhe"]
[ext_resource type="Script" uid="uid://b1pwatu6yrfpb" path="res://Scripts/ProcMapGenerator.gd" id="14"]
[ext_resource type="Texture2D" uid="uid://boyyd16hwu0qb" path="res://hat diagonal.png" id="15_h1m7h"]

[node name="Main" type="Node2D"]
script = ExtResource("8")

[node name="HatDiagonal" type="Sprite2D" parent="."]
position = Vector2(3748.9998, 1099)
scale = Vector2(14.177812, 12.536694)
texture = ExtResource("15_h1m7h")

[node name="Floor" type="TileMapLayer" parent="."]
tile_set = ExtResource("13_frkhe")

[node name="Walls" type="TileMapLayer" parent="."]
tile_set = ExtResource("3_1p5hy")

[node name="ProcMapGenerator" type="Node2D" parent="."]
script = ExtResource("14")
map_width = 80
map_height = 60
room_attempts = 24
enemy_spawn_min_floor_neighbors = 40
total_enemy_count = 40
remove_existing_enemies = false

[node name="GlobalDarkness" type="CanvasModulate" parent="."]
color = Color(0, 0, 0, 1)

[node name="Player" parent="." instance=ExtResource("1")]
position = Vector2(-82, -58)

[node name="SoundRippleManager" parent="." instance=ExtResource("6")]

[node name="AudioLayers" type="Node" parent="."]

[node name="TensionLayer" type="AudioStreamPlayer" parent="AudioLayers"]
volume_db = -30.0

[node name="HeartbeatLayer" type="AudioStreamPlayer" parent="AudioLayers"]
volume_db = -30.0

[node name="EscalationManager" type="Node2D" parent="."]
position = Vector2(-15, 25)
script = ExtResource("9")
overlay_path = NodePath("../ReadabilityOverlay")
tension_player_path = NodePath("../AudioLayers/TensionLayer")
heartbeat_player_path = NodePath("../AudioLayers/HeartbeatLayer")
message_hud_path = NodePath("../MessageHud")
hunter_scene = ExtResource("10")

[node name="ReadabilityOverlay" parent="." instance=ExtResource("4")]

[node name="ExitSignLayer" parent="." instance=ExtResource("5")]

[node name="HuntedBanner" parent="." instance=ExtResource("11")]

[node name="MessageHud" parent="." instance=ExtResource("2")]

[node name="InteractPrompt" parent="." instance=ExtResource("12")]
