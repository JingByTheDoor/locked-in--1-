[gd_scene load_steps=27 format=3]

[ext_resource type="Script" path="res://Scripts/ScavengeRun.gd" id="1"]
[ext_resource type="PackedScene" path="res://Scenes/Player.tscn" id="2"]
[ext_resource type="PackedScene" path="res://Scenes/Guard.tscn" id="3"]
[ext_resource type="PackedScene" path="res://Scenes/ExtractionZone.tscn" id="4"]
[ext_resource type="PackedScene" path="res://Scenes/LootPickup.tscn" id="5"]
[ext_resource type="PackedScene" path="res://Scenes/HidingSpot.tscn" id="6"]
[ext_resource type="PackedScene" path="res://Scenes/Watcher.tscn" id="16"]
[ext_resource type="PackedScene" path="res://Scenes/BreakableProp.tscn" id="17"]
[ext_resource type="PackedScene" path="res://VFX/SoundRippleManager.tscn" id="7"]
[ext_resource type="PackedScene" path="res://VFX/VisionMask.tscn" id="8"]
[ext_resource type="PackedScene" path="res://VFX/ReadabilityOverlay.tscn" id="9"]
[ext_resource type="PackedScene" path="res://UI/ExitSignLayer.tscn" id="10"]
[ext_resource type="PackedScene" path="res://UI/HuntedBanner.tscn" id="11"]
[ext_resource type="PackedScene" path="res://UI/MessageHud.tscn" id="12"]
[ext_resource type="PackedScene" path="res://UI/InteractPrompt.tscn" id="19"]
[ext_resource type="Script" path="res://Scripts/EscalationManager.gd" id="13"]
[ext_resource type="PackedScene" path="res://Scenes/Hunter.tscn" id="14"]
[ext_resource type="Texture2D" path="res://icon.svg" id="15"]
[ext_resource type="Script" path="res://Scripts/MapRules.gd" id="18"]

[sub_resource type="RectangleShape2D" id="1"]
size = Vector2(1200, 40)

[sub_resource type="RectangleShape2D" id="2"]
size = Vector2(40, 800)

[sub_resource type="RectangleShape2D" id="3"]
size = Vector2(40, 180)

[sub_resource type="RectangleShape2D" id="4"]
size = Vector2(40, 200)

[sub_resource type="RectangleShape2D" id="5"]
size = Vector2(40, 160)

[sub_resource type="RectangleShape2D" id="6"]
size = Vector2(160, 40)

[sub_resource type="RectangleShape2D" id="7"]
size = Vector2(80, 80)

[sub_resource type="RectangleShape2D" id="8"]
size = Vector2(120, 60)

[node name="ScavengeRun" type="Node2D"]
script = ExtResource("1")

[node name="MapRules" type="Node" parent="."]
script = ExtResource("18")

[node name="PlayerSpawns" type="Node2D" parent="."]

[node name="SpawnA" type="Node2D" parent="PlayerSpawns"]
position = Vector2(-520, 320)

[node name="SpawnB" type="Node2D" parent="PlayerSpawns"]
position = Vector2(-520, -320)

[node name="SpawnC" type="Node2D" parent="PlayerSpawns"]
position = Vector2(520, 320)

[node name="SpawnD" type="Node2D" parent="PlayerSpawns"]
position = Vector2(520, -320)

[node name="Map" type="Node2D" parent="."]

[node name="OuterWallTop" type="StaticBody2D" parent="Map"]
position = Vector2(0, -420)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/OuterWallTop"]
shape = SubResource("1")

[node name="Sprite2D" type="Sprite2D" parent="Map/OuterWallTop"]
texture = ExtResource("15")
scale = Vector2(6, 0.25)
modulate = Color(0.15, 0.15, 0.15, 1)

[node name="OuterWallBottom" type="StaticBody2D" parent="Map"]
position = Vector2(0, 420)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/OuterWallBottom"]
shape = SubResource("1")

[node name="Sprite2D" type="Sprite2D" parent="Map/OuterWallBottom"]
texture = ExtResource("15")
scale = Vector2(6, 0.25)
modulate = Color(0.15, 0.15, 0.15, 1)

[node name="OuterWallLeft" type="StaticBody2D" parent="Map"]
position = Vector2(-620, 0)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/OuterWallLeft"]
shape = SubResource("2")

[node name="Sprite2D" type="Sprite2D" parent="Map/OuterWallLeft"]
texture = ExtResource("15")
scale = Vector2(0.25, 6)
modulate = Color(0.15, 0.15, 0.15, 1)

[node name="OuterWallRight" type="StaticBody2D" parent="Map"]
position = Vector2(620, 0)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/OuterWallRight"]
shape = SubResource("2")

[node name="Sprite2D" type="Sprite2D" parent="Map/OuterWallRight"]
texture = ExtResource("15")
scale = Vector2(0.25, 6)
modulate = Color(0.15, 0.15, 0.15, 1)

[node name="WallLeftTop" type="StaticBody2D" parent="Map"]
position = Vector2(-200, -280)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/WallLeftTop"]
shape = SubResource("3")

[node name="Sprite2D" type="Sprite2D" parent="Map/WallLeftTop"]
texture = ExtResource("15")
scale = Vector2(0.25, 1.4)
modulate = Color(0.2, 0.2, 0.2, 1)

[node name="WallLeftMid" type="StaticBody2D" parent="Map"]
position = Vector2(-200, -20)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/WallLeftMid"]
shape = SubResource("3")

[node name="Sprite2D" type="Sprite2D" parent="Map/WallLeftMid"]
texture = ExtResource("15")
scale = Vector2(0.25, 1.4)
modulate = Color(0.2, 0.2, 0.2, 1)

[node name="WallLeftBottom" type="StaticBody2D" parent="Map"]
position = Vector2(-200, 240)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/WallLeftBottom"]
shape = SubResource("3")

[node name="Sprite2D" type="Sprite2D" parent="Map/WallLeftBottom"]
texture = ExtResource("15")
scale = Vector2(0.25, 1.4)
modulate = Color(0.2, 0.2, 0.2, 1)

[node name="WallRightTop" type="StaticBody2D" parent="Map"]
position = Vector2(200, -300)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/WallRightTop"]
shape = SubResource("5")

[node name="Sprite2D" type="Sprite2D" parent="Map/WallRightTop"]
texture = ExtResource("15")
scale = Vector2(0.25, 1.2)
modulate = Color(0.2, 0.2, 0.2, 1)

[node name="WallRightMid" type="StaticBody2D" parent="Map"]
position = Vector2(200, -60)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/WallRightMid"]
shape = SubResource("4")

[node name="Sprite2D" type="Sprite2D" parent="Map/WallRightMid"]
texture = ExtResource("15")
scale = Vector2(0.25, 1.6)
modulate = Color(0.2, 0.2, 0.2, 1)

[node name="WallRightBottom" type="StaticBody2D" parent="Map"]
position = Vector2(200, 180)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/WallRightBottom"]
shape = SubResource("4")

[node name="Sprite2D" type="Sprite2D" parent="Map/WallRightBottom"]
texture = ExtResource("15")
scale = Vector2(0.25, 1.6)
modulate = Color(0.2, 0.2, 0.2, 1)

[node name="WallRightH1" type="StaticBody2D" parent="Map"]
position = Vector2(300, 0)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/WallRightH1"]
shape = SubResource("6")

[node name="Sprite2D" type="Sprite2D" parent="Map/WallRightH1"]
texture = ExtResource("15")
scale = Vector2(1.2, 0.25)
modulate = Color(0.2, 0.2, 0.2, 1)

[node name="WallRightH2" type="StaticBody2D" parent="Map"]
position = Vector2(520, 0)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/WallRightH2"]
shape = SubResource("6")

[node name="Sprite2D" type="Sprite2D" parent="Map/WallRightH2"]
texture = ExtResource("15")
scale = Vector2(1.2, 0.25)
modulate = Color(0.2, 0.2, 0.2, 1)

[node name="WallLeftH1" type="StaticBody2D" parent="Map"]
position = Vector2(-420, 140)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/WallLeftH1"]
shape = SubResource("6")

[node name="Sprite2D" type="Sprite2D" parent="Map/WallLeftH1"]
texture = ExtResource("15")
scale = Vector2(1.2, 0.25)
modulate = Color(0.2, 0.2, 0.2, 1)

[node name="CrateA" type="StaticBody2D" parent="Map"]
position = Vector2(-480, -80)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/CrateA"]
shape = SubResource("7")

[node name="Sprite2D" type="Sprite2D" parent="Map/CrateA"]
texture = ExtResource("15")
scale = Vector2(0.6, 0.6)
modulate = Color(0.35, 0.3, 0.2, 1)

[node name="CrateB" type="StaticBody2D" parent="Map"]
position = Vector2(60, 260)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/CrateB"]
shape = SubResource("8")

[node name="Sprite2D" type="Sprite2D" parent="Map/CrateB"]
texture = ExtResource("15")
scale = Vector2(0.9, 0.45)
modulate = Color(0.35, 0.3, 0.2, 1)

[node name="CrateC" type="StaticBody2D" parent="Map"]
position = Vector2(440, -220)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/CrateC"]
shape = SubResource("7")

[node name="Sprite2D" type="Sprite2D" parent="Map/CrateC"]
texture = ExtResource("15")
scale = Vector2(0.6, 0.6)
modulate = Color(0.35, 0.3, 0.2, 1)

[node name="ExitSignWorld" type="Sprite2D" parent="Map"]
texture = ExtResource("15")
position = Vector2(520, -320)
scale = Vector2(0.4, 0.4)
modulate = Color(0.35, 1, 0.55, 1)

[node name="ExitSignWorld2" type="Sprite2D" parent="Map"]
texture = ExtResource("15")
position = Vector2(-520, 320)
scale = Vector2(0.4, 0.4)
modulate = Color(0.35, 1, 0.55, 1)

[node name="Player" parent="." instance=ExtResource("2")]
position = Vector2(-520, 0)

[node name="ExtractionZone" parent="." instance=ExtResource("4")]
position = Vector2(520, -260)

[node name="ExtractionZone2" parent="." instance=ExtResource("4")]
position = Vector2(-520, 260)

[node name="LootScrap1" parent="." instance=ExtResource("5")]
position = Vector2(-520, -260)
loot_type = 0
amount = 3
carry_rank_add = 1

[node name="Sprite2D" parent="LootScrap1"]
modulate = Color(0.7, 0.7, 0.7, 1)

[node name="LootWood1" parent="." instance=ExtResource("5")]
position = Vector2(-420, 220)
loot_type = 1
amount = 2
carry_rank_add = 1

[node name="Sprite2D" parent="LootWood1"]
modulate = Color(0.7, 0.5, 0.3, 1)

[node name="LootAmmo1" parent="." instance=ExtResource("5")]
position = Vector2(20, -260)
loot_type = 4
amount = 6
carry_rank_add = 1

[node name="Sprite2D" parent="LootAmmo1"]
modulate = Color(0.6, 0.7, 1, 1)

[node name="LootFood1" parent="." instance=ExtResource("5")]
position = Vector2(420, 220)
loot_type = 3
amount = 1
grade = 2
carry_rank_add = 2

[node name="Sprite2D" parent="LootFood1"]
modulate = Color(0.45, 0.9, 0.45, 1)

[node name="LootFuel1" parent="." instance=ExtResource("5")]
position = Vector2(120, 320)
loot_type = 2
amount = 1
grade = 1
carry_rank_add = 2

[node name="Sprite2D" parent="LootFuel1"]
modulate = Color(0.95, 0.85, 0.2, 1)

[node name="LootScrap2" parent="." instance=ExtResource("5")]
position = Vector2(300, -140)
loot_type = 0
amount = 2
carry_rank_add = 1

[node name="Sprite2D" parent="LootScrap2"]
modulate = Color(0.65, 0.65, 0.65, 1)

[node name="BreakableCrate1" parent="." instance=ExtResource("17")]
position = Vector2(-320, -120)

[node name="BreakableCrate2" parent="." instance=ExtResource("17")]
position = Vector2(120, 80)

[node name="BreakableGlass1" parent="." instance=ExtResource("17")]
position = Vector2(420, -80)
break_color = Color(0.6, 0.8, 1, 0.9)
intact_color = Color(0.55, 0.7, 0.9, 1)
broken_color = Color(0.35, 0.4, 0.5, 1)

[node name="HidingSpot1" parent="." instance=ExtResource("6")]
position = Vector2(-520, 320)

[node name="Sprite2D" parent="HidingSpot1"]
modulate = Color(0.4, 0.45, 0.55, 1)

[node name="HidingSpot2" parent="." instance=ExtResource("6")]
position = Vector2(540, -320)

[node name="Sprite2D" parent="HidingSpot2"]
modulate = Color(0.4, 0.45, 0.55, 1)

[node name="UnfairRoom" type="Node2D" parent="."]
position = Vector2(420, -220)
groups = ["unfair_room"]

[node name="GuardLeft" parent="." instance=ExtResource("3")]
position = Vector2(-360, -200)
patrol_path = NodePath("../PatrolPathLeft")

[node name="GuardCenter" parent="." instance=ExtResource("3")]
position = Vector2(-40, -200)
patrol_path = NodePath("../PatrolPathCenter")

[node name="GuardRight" parent="." instance=ExtResource("3")]
position = Vector2(340, 160)
patrol_path = NodePath("../PatrolPathRight")

[node name="GuardSouth" parent="." instance=ExtResource("3")]
position = Vector2(120, 300)
patrol_path = NodePath("../PatrolPathSouth")

[node name="WatcherA" parent="." instance=ExtResource("16")]
position = Vector2(260, -40)
patrol_path = NodePath("../WatcherPath")

[node name="PatrolPathLeft" type="Node2D" parent="."]
position = Vector2(-450, -200)

[node name="PointA" type="Node2D" parent="PatrolPathLeft"]
position = Vector2(-80, -80)

[node name="PointB" type="Node2D" parent="PatrolPathLeft"]
position = Vector2(80, -80)

[node name="PointC" type="Node2D" parent="PatrolPathLeft"]
position = Vector2(80, 80)

[node name="PointD" type="Node2D" parent="PatrolPathLeft"]
position = Vector2(-80, 80)

[node name="PatrolPathCenter" type="Node2D" parent="."]
position = Vector2(0, -180)

[node name="PointA" type="Node2D" parent="PatrolPathCenter"]
position = Vector2(-80, -60)

[node name="PointB" type="Node2D" parent="PatrolPathCenter"]
position = Vector2(80, -60)

[node name="PointC" type="Node2D" parent="PatrolPathCenter"]
position = Vector2(80, 80)

[node name="PointD" type="Node2D" parent="PatrolPathCenter"]
position = Vector2(-80, 80)

[node name="PatrolPathRight" type="Node2D" parent="."]
position = Vector2(360, 180)

[node name="PointA" type="Node2D" parent="PatrolPathRight"]
position = Vector2(-80, -80)

[node name="PointB" type="Node2D" parent="PatrolPathRight"]
position = Vector2(120, -80)

[node name="PointC" type="Node2D" parent="PatrolPathRight"]
position = Vector2(120, 80)

[node name="PointD" type="Node2D" parent="PatrolPathRight"]
position = Vector2(-80, 80)

[node name="PatrolPathSouth" type="Node2D" parent="."]
position = Vector2(120, 300)

[node name="PointA" type="Node2D" parent="PatrolPathSouth"]
position = Vector2(-60, -40)

[node name="PointB" type="Node2D" parent="PatrolPathSouth"]
position = Vector2(60, -40)

[node name="PointC" type="Node2D" parent="PatrolPathSouth"]
position = Vector2(60, 40)

[node name="PointD" type="Node2D" parent="PatrolPathSouth"]
position = Vector2(-60, 40)

[node name="WatcherPath" type="Node2D" parent="."]
position = Vector2(260, -40)

[node name="PointA" type="Node2D" parent="WatcherPath"]
position = Vector2(-60, -40)

[node name="PointB" type="Node2D" parent="WatcherPath"]
position = Vector2(60, -40)

[node name="PointC" type="Node2D" parent="WatcherPath"]
position = Vector2(60, 40)

[node name="PointD" type="Node2D" parent="WatcherPath"]
position = Vector2(-60, 40)

[node name="SoundRippleManager" parent="." instance=ExtResource("7")]

[node name="AudioLayers" type="Node" parent="."]

[node name="TensionLayer" type="AudioStreamPlayer" parent="AudioLayers"]
volume_db = -30.0

[node name="HeartbeatLayer" type="AudioStreamPlayer" parent="AudioLayers"]
volume_db = -30.0

[node name="EscalationManager" type="Node2D" parent="."]
script = ExtResource("13")
overlay_path = NodePath("../ReadabilityOverlay")
tension_player_path = NodePath("../AudioLayers/TensionLayer")
heartbeat_player_path = NodePath("../AudioLayers/HeartbeatLayer")
message_hud_path = NodePath("../MessageHud")
hunter_scene = ExtResource("14")

[node name="VisionMask" parent="." instance=ExtResource("8")]
target_path = NodePath("../Player/VisionCone")

[node name="ReadabilityOverlay" parent="." instance=ExtResource("9")]

[node name="ExitSignLayer" parent="." instance=ExtResource("10")]

[node name="HuntedBanner" parent="." instance=ExtResource("11")]

[node name="MessageHud" parent="." instance=ExtResource("12")]

[node name="InteractPrompt" parent="." instance=ExtResource("19")]
